(this["webpackJsonpcuriosities-frontend"]=this["webpackJsonpcuriosities-frontend"]||[]).push([[0],{22:function(e,t,r){},23:function(e,t,r){},29:function(e,t,r){"use strict";r.r(t);var n=r(1),i=r.n(n),s=r(11),a=r.n(s),c=(r(22),r(23),r(12)),o=r(13),u=r(2),l=r(3),h=r(6),d=r(5),j=r(4),b=r(14),p=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"curiosity",value:function(t,r,n){return fetch(e.SERVER_CURIOSITY_URL+e.GET_PAGE+"/"+t+"/"+r+"/"+n)}},{key:"getTopics",value:function(t,r){return fetch(e.SERVER_CURIOSITY_URL+e.GET_TOPICS+"/"+t+"/"+r)}},{key:"getStats",value:function(t){return console.log("userName for Stats :"+t),fetch(e.SERVER_CURIOSITY_URL+e.GET_STATS+t)}},{key:"getUsers",value:function(t){return fetch(e.SERVER_CURIOSITY_URL+e.GET_USERS_BY_IDS+t.join(","))}}]),e}();p.SERVER_CURIOSITY_URL="http://132.226.205.181",p.GET_PAGE="/wiki/curiosity/page",p.GET_TOPICS="/wiki/curiosity/topics",p.GET_STATS="/wiki/curiosity/stats?userName=",p.GET_USERS_BY_IDS="/wiki/curiosity/users/";var g=p,O=r(0),f=function(e){Object(d.a)(r,e);var t=Object(j.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Original Query"}),Object(O.jsx)("th",{children:"Query"})]})}),Object(O.jsx)("tbody",{children:this.props.queryPageList.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.originalQuery}),Object(O.jsx)("td",{children:e.query})]},e.id)}))})]})}}]),r}(n.Component),y=f,v=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"leaderBoard",value:function(){return fetch(e.SERVER_CHAMPIONSHIP_URL+e.GET_LEADERBOARD)}}]),e}();v.SERVER_CHAMPIONSHIP_URL="http://132.226.193.189",v.GET_LEADERBOARD="/leaders";var x,m=v,S=function(e){Object(d.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={leaderboard:[],serverError:!1},n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.refreshLeaderBoard(),setInterval(this.refreshLeaderBoard.bind(this),5e3)}},{key:"getLeaderBoardData",value:function(){return m.leaderBoard().then((function(e){return e.ok?e.json():Promise.reject("Champioship: error response")}))}},{key:"getUserAliasData",value:function(e){return g.getUsers(e).then((function(e){return e.ok?e.json():Promise.reject("Curiosity: error response")}))}},{key:"updateLeaderBoard",value:function(e){this.setState({leaderboard:e,serverError:!1})}},{key:"refreshLeaderBoard",value:function(){var e=this;this.getLeaderBoardData().then((function(t){console.log("lbData :"),console.log(t);var r=t.map((function(e){return e.userId}));console.log("userIds :"),console.log(r),r.length>0&&(console.log(r.length),e.getUserAliasData(r).then((function(r){console.log("data :"),console.log(r);var n=new Map;r.forEach((function(e){n.set(e.id,e.userName)})),t.forEach((function(e){return e.alias=n.get(e.userId)})),e.updateLeaderBoard(t)})).catch((function(r){console.log("Error mapping user ids",r),e.updateLeaderBoard(t)})))})).catch((function(t){e.setState({serverError:!0}),console.log("Champioship server error",t)}))}},{key:"render",value:function(){return this.state.serverError?Object(O.jsx)("div",{children:"We're sorry, but we can't display game statistics at this moment."}):Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Curiosity Championship"}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"User"}),Object(O.jsx)("th",{children:"Score"}),Object(O.jsx)("th",{children:"Badges"})]})}),Object(O.jsx)("tbody",{children:this.state.leaderboard.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.alias?e.alias:e.userId}),Object(O.jsx)("td",{children:e.totalScore}),Object(O.jsx)("td",{children:e.badges.map((function(e){return Object(O.jsx)("span",{className:"badge",children:e},e)}))})]},e.userId)}))})]})]})}}]),r}(n.Component),k=function(e){Object(d.a)(r,e);var t=Object(j.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).state={user:"",message:"I want to know about...",query:"?",queryTopics:"",originalQuery:"OldValueDude",curiosityUrl:"https://www.wikipedia.org/",topic1:"",topic2:"",topic3:"",queryPageList:[]},n.handleSubmitGetCuriosity=n.handleSubmitGetCuriosity.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmitGetPages=n.handleSubmitGetPages.bind(Object(h.a)(n)),n}return Object(l.a)(r,[{key:"componentDidMount",value:function(){}},{key:"handleSubmitGetCuriosity",value:function(e,t,r){var n=this;g.curiosity(t,e,r).then((function(e){e.ok?(n.updateMessage("Oki! Here you have all you need to know about..."),e.json().then((function(e){n.setState({query:e.title,curiosityUrl:e.keyUrl})})),n.updateLastQueryPages(n.state.user)):(alert("Ups! I have a little problem!"),n.updateMessage("Can't reach the server - Res in NoK! Make sure you have nickname!"))}))}},{key:"handleChange",value:function(e){var t=e.target.name;this.setState(Object(o.a)({},t,e.target.value))}},{key:"updateMessage",value:function(e){this.setState({message:e})}},{key:"handleSubmitGetPages",value:function(e){var t=this;e.preventDefault(),g.getTopics(this.state.user,this.state.query).then((function(e){e.ok?(t.updateMessage("There are a few articles available for your curiosity"),e.json().then((function(e){console.log(Object.keys(e.query.pages));var r=Object.keys(e.query.pages);t.setState({originalQuery:t.state.query,topic1:e.query.pages[r[0]].title,topic2:e.query.pages[r[1]].title,topic3:e.query.pages[r[2]].title})})),t.updateLastQueryPages(t.state.user)):(alert("Ups! I have a little problem!"),t.updateMessage("Please make sure you have nickname or a proper query"))}))}},{key:"updateLastQueryPages",value:function(e){var t=this;g.getStats(e).then((function(e){if(e.ok){var r=[];e.json().then((function(e){e.forEach((function(e){r.push(e)})),t.setState({queryPageList:r})}))}}))}},{key:"render",value:function(){var e=this,t={blue:{default:"#3f51b5",hover:"#283593"},green:{default:"#d4e157",hover:"#616b57"},pink:{default:"#e91e63",hover:"#ad1457"}},r=b.a.button(x||(x=Object(c.a)(["\n    background-color: ",";\n    color: white;\n    padding: 5px 15px;\n    border-radius: 5px;\n    outline: 0;\n    text-transform: uppercase;\n    margin: 10px 0px;\n    cursor: pointer;\n    box-shadow: 0px 2px 2px lightgray;\n    transition: ease background-color 250ms;\n    &:hover {\n        background-color: ",";\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.7;\n    }\n    "])),(function(e){return t[e.theme].default}),(function(e){return t[e.theme].hover}));return r.defaultProps={theme:"blue"},Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"WikipediA CuriositieS Dev"}),Object(O.jsx)("h5",{children:this.state.message}),Object(O.jsxs)("div",{children:[Object(O.jsx)(S,{}),Object(O.jsx)("h2",{children:this.state.query})]}),Object(O.jsxs)("form",{onSubmit:this.handleSubmitGetPages,children:[Object(O.jsxs)("label",{children:["Name:",Object(O.jsx)("input",{type:"text",maxLength:"24",name:"user",value:this.state.user,onChange:this.handleChange})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{children:["Query:",Object(O.jsx)("input",{type:"text",maxLength:"24",name:"query",value:this.state.query,onChange:this.handleChange})]}),Object(O.jsx)("br",{}),Object(O.jsx)("input",{type:"submit",value:"Submit"})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Available Articles"}),Object(O.jsxs)("h3",{children:[Object(O.jsxs)(r,{onClick:function(){return e.handleSubmitGetCuriosity(e.state.topic1,e.state.user,e.state.originalQuery)},children:[" ",this.state.topic1," "]}),Object(O.jsxs)(r,{theme:"pink",onClick:function(){return e.handleSubmitGetCuriosity(e.state.topic2,e.state.user,e.state.originalQuery)},children:[" ",this.state.topic2," "]}),Object(O.jsxs)(r,{theme:"green",onClick:function(){return e.handleSubmitGetCuriosity(e.state.topic3,e.state.user,e.state.originalQuery)},children:[" ",this.state.topic3," "]})]})]}),Object(O.jsx)("div",{children:Object(O.jsx)("iframe",{width:"100%",height:"400",src:this.state.curiosityUrl,title:"Wikipedia Page"})}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("h3",{children:[this.state.user," Statistics"]}),Object(O.jsx)(y,{queryPageList:this.state.queryPageList})]})]})}}]),r}(n.Component);var E=function(){return Object(O.jsx)(k,{})},C=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,30)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;r(e),n(e),i(e),s(e),a(e)}))};a.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(E,{})}),document.getElementById("root")),C()}},[[29,1,2]]]);
//# sourceMappingURL=main.d15f9164.chunk.js.map